<!-- Contact -->
{% if site.locale and site.locale != "" and site.locale != nil %}
<section class="page-section" id="{{ site.data.sitetext[site.locale].contact.section | default: "contact" }}">
  <div class="container">
    <div class="row">
      <div class="col-lg-12 text-center">
        <h2 class="section-heading text-uppercase">
          {{ site.data.sitetext[site.locale].contact.title | markdownify | default: Contact Us }}</h2>
        <h3 class="section-subheading text-muted">{{ site.data.sitetext[site.locale].contact.text | default: "" }}</h3>
      </div>
    </div>
    <div class="row">
      <div class="col-lg-12">
        <form id="contactForm"
          action="https://formspree.io/{% if site.formspree_form_path %}{{ site.formspree_form_path }}{% else %}{{ site.email }}{% endif %}"
          novalidate="novalidate" method="POST">
          <!--name="sentMessage"-->
          <div class="row">
            <div class="col-md-6">
              <div class="form-group">
                <input name="name" class="form-control" id="name" type="text"
                  placeholder="{{ site.data.sitetext[site.locale].contact.name | default: "Name*" }}"
                  required="required" data-validation-required-message="{{ site.data.sitetext[site.locale].contact.name-validation | default: "Please enter your name." }}">
                <p class="help-block text-danger"></p>
              </div>
              <div class="form-group">
                <input name="_replyto" class="form-control" id="email" type="email"
                  placeholder="{{ site.data.sitetext[site.locale].contact.email | default: "Email*" }}"
                  required="required" data-validation-required-message="{{ site.data.sitetext[site.locale].contact.email-validation | default: "Please enter your email address." }}">
                <p class="help-block text-danger"></p>
              </div>
              <div class="form-group">
                <input name="phone" class="form-control" id="phone" type="tel"
                  placeholder="{{ site.data.sitetext[site.locale].contact.phone | default: "Phone Number*" }}">
                <p class="help-block text-danger"></p>
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-group">
                <textarea name="message" class="form-control" id="message"
                  placeholder="{{ site.data.sitetext[site.locale].contact.message | default: "Message*" }}"
                  required="required" data-validation-required-message="{{ site.data.sitetext[site.locale].contact.message-validation | default: "Please enter a message." }}"></textarea>
                <p class="help-block text-danger"></p>
              </div>
            </div>
            <input type="hidden" name="_subject" id="email-subject"
              value="{{ site.data.sitetext[site.locale].contact.subject | default: "Contact Form Submission" }}">
            <div class="clearfix"></div>
            
            <!-- Hidden reCAPTCHA Response -->
            <input type="hidden" name="g-recaptcha-response" id="g-recaptcha-response">

            <input type="hidden" name="_subject" id="email-subject" value="Contact Form Submission">
                        
            <!-- Redirect after submission (prevent Formspree default redirect) -->
            <input type="hidden" name="_next" value="index.html">
            
            <div class="col-lg-12 text-center">
              <div id="success"></div>
              <button id="sendMessageButton" class="btn btn-primary btn-xl text-uppercase"
                type="submit">{{ site.data.sitetext[site.locale].contact.submit | default: "Send Message" }}</button>
                <script>
                  function onSubmit(token) {
                    document.getElementById("demo-form").submit();
                  }
                </script>
            </div>
            <input type="text" name="_gotcha" style="display:none">
            <input type="hidden" name="_next" value="#" />
          </div>
        </form>
        <!-- Load reCAPTCHA v3 script -->
        <script src="https://www.google.com/recaptcha/api.js?render={{ site.recaptcha_site_key }}" async defer></script>

        <script>
          // This function is called when the form is submitted
          function validateRecaptcha() {
              // Execute reCAPTCHA v3 to get the token
              grecaptcha.execute('{{ site.recaptcha_site_key }}', {action: 'submit'}).then(function(token) {
                  // Add the token to the hidden input field
                  document.getElementById('g-recaptcha-response').value = token;

                  // Submit the form after token is added
                  document.getElementById("contactForm").submit();
              });

              // Prevent the form from submitting immediately
              return false;
          }
        </script>
      </div>
    </div>
  </div>
</section>
{% else %}
<section class="page-section" id="{{ site.data.sitetext.contact.section | default: "contact" }}">
  <div class="container">
    <div class="row">
      <div class="col-lg-12 text-center">
        <h2 class="section-heading text-uppercase">
          {{ site.data.sitetext.contact.title | markdownify | default: Contact Us }}</h2>
        <h3 class="section-subheading text-muted">{{ site.data.sitetext.contact.text | default: "" }}</h3>
      </div>
    </div>
    <div class="row">
      <div class="col-lg-12">
        <form id="contactForm"
          action="https://formspree.io/{% if site.formspree_form_path %}{{ site.formspree_form_path }}{% else %}{{ site.email }}{% endif %}"
          novalidate="novalidate" method="POST">
          <!--name="sentMessage"-->
          <div class="row">
            <div class="col-md-6">
              <div class="form-group">
                <input name="name" class="form-control" id="name" type="text"
                  placeholder="{{ site.data.sitetext.contact.name | default: "Name*" }}"
                  required="required" data-validation-required-message="{{ site.data.sitetext.contact.name-validation | default: "Please enter your name." }}">
                <p class="help-block text-danger"></p>
              </div>
              <div class="form-group">
                <input name="_replyto" class="form-control" id="email" type="email"
                  placeholder="{{ site.data.sitetext.contact.email | default: "Email*" }}"
                  required="required" data-validation-required-message="{{ site.data.sitetext.contact.email-validation | default: "Please enter your email address." }}">
                <p class="help-block text-danger"></p>
              </div>
              <div class="form-group">
                <input name="phone" class="form-control" id="phone" type="tel"
                  placeholder="{{ site.data.sitetext.contact.phone | default: "Phone Number*" }}"
                  required="required" data-validation-required-message="{{ site.data.sitetext.contact.phone-validation | default: "Please enter your phone number." }}">
                <p class="help-block text-danger"></p>
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-group">
                <textarea name="message" class="form-control" id="message"
                  placeholder="{{ site.data.sitetext.contact.message | default: "Message*" }}"
                  required="required" data-validation-required-message="{{ site.data.sitetext.contact.message-validation | default: "Please enter a message." }}"></textarea>
                <p class="help-block text-danger"></p>
              </div>
            </div>
            <input type="hidden" name="_subject" id="email-subject"
              value="{{ site.data.sitetext.contact.subject | default: "Contact Form Submission" }}">

            <!-- Hidden reCAPTCHA Response -->
            <input type="hidden" name="g-recaptcha-response" id="g-recaptcha-response">

            <input type="hidden" name="_subject" id="email-subject" value="Contact Form Submission">
                        
            <!-- Redirect after submission (prevent Formspree default redirect) -->
            <input type="hidden" name="_next" value="index.html">
                        
            <div class="clearfix"></div>
            
            <div class="col-lg-12 text-center">
              <div id="success"></div>
              <button id="sendMessageButton" class="btn btn-primary btn-xl text-uppercase"
                type="submit">{{ site.data.sitetext.contact.submit | default: "Send Message" }}</button>
            </div>
            <input type="text" name="_gotcha" style="display:none">
            <input type="hidden" name="_next" value="#" />
          </div>
        </form>
        <!-- Load reCAPTCHA v3 script -->
        <script src="https://www.google.com/recaptcha/api.js?render={{ site.recaptcha_site_key }}" async defer></script>

        <script>
          // This function is called when the form is submitted
          function validateRecaptcha() {
              // Execute reCAPTCHA v3 to get the token
              grecaptcha.execute('{{ site.recaptcha_site_key }}', {action: 'submit'}).then(function(token) {
                  // Add the token to the hidden input field
                  document.getElementById('g-recaptcha-response').value = token;

                  // Submit the form after token is added
                  document.getElementById("contactForm").submit();
              });

              // Prevent the form from submitting immediately
              return false;
          }
        </script>
      </div>
    </div>
  </div>
</section>
{% endif %}
<!-- End Contact -->